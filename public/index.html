<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/node_modules/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/node_modules/bootstrap-social/bootstrap-social.css">
    <link rel="stylesheet" href="/public/assets/css/styles.css">
    <title>SRM</title>
</head>

<body>
    <nav class="navbar navbar-dark navbar-expand-sm fixed-top">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#Navbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="Navbar">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active" id="home-li"><a id="home-link" class="nav-link" href="#"><span
                                class="fa fa-home"></span> Home</a>
                    </li>
                    <li class="nav-item" id="about-li"><a id="about-link" class="nav-link" href="#"><span
                                class="fa fa-info"></span>
                            About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="jumbotron">
        <div class="container">
            <div class="row row-header">
                <div class="col-12 col-sm-12">
                    <h1 class="text-center">Statistical Region Merging</h1>
                </div>
            </div>
        </div>
    </header>

    <div aria-live="polite" aria-atomic="true" class="notification">
        <div class="toast toast-success" style="position: absolute; top: 0; right: 0;">
            <div class="toast-header d-flex justify-content-between navbar-dark text-light">
                <i class="fa fa-upload dblock"> </i>
                <strong class='m-1'>Notification</strong>
                <button type="button" class="dblock ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                <strong class="mr-auto text-success lead" id='toast-success'></strong>
            </div>
        </div>
    </div>

    <div aria-live="polite" aria-atomic="true" class="notification">
        <div class="toast toast-danger" style="position: absolute; top: 0; right: 0;">
            <div class="toast-header d-flex justify-content-between navbar-dark text-light">
                <i class="fa fa-upload dblock"> </i>
                <strong class='m-1'>Notification</strong>
                <button type="button" class="dblock ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                <strong class="mr-auto text-danger lead" id='toast-error'></strong>
            </div>
        </div>
    </div>

    <div class="container">

        <div class="row" id="home-body">
            <div class="col-12 my-3">
                <div class="card">
                    <div class="card-header bg-color text-white">
                        <p class="card-text">
                        <h4></h4>
                        </p>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 col-md d-flex justify-content-center mt-1">
                                <div class="area" id="box">
                                    <input type="file" id="upload" accept="image/jpeg, image/png" />
                                </div>
                            </div>
                            <div class="col-12 col-md d-flex justify-content-center mt-1">
                                <div class="srm_area" id="srmBox">
                                    <div class="spinner-border spinner-srm m-2" id="spinner-srm" role="status">
                                        <span class="sr-only">Loading...</span>
                                    </div>
                                    <div id="carouselExampleIndicators" id="carousel" class="carousel slide">
                                        <ol class="carousel-indicators" id="carousel-indicators">
                                            <li data-target="#carouselExampleIndicators" data-slide-to="0"
                                                class="active"></li>
                                        </ol>
                                        <div class="carousel-inner" id="carousel-inner">
                                            <div class="carousel-item active">
                                                <img src="/public/assets/img/placeholder.png" alt="0">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="offset-1 col-10 offset-md-4 col-md-1 d-flex justify-content-center mt-3">
                                <input class="btn btn-color" id="confirm" value="Confirm" />
                            </div>
                            <div class="offset-1 col-10 col-md-3 d-flex justify-content-center mt-3">
                                <input class="btn btn-color" id="reset" value="Reset" />
                            </div>
                            <div class="col-12" id="edit-srm">
                                <div class="input-group input-group-sm mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-sm">Q Value:</span>
                                    </div>
                                    <input type="text" class="form-control" id="valueRange" readonly value="10"
                                        aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                                    <input type="range" class="form-control ml-2" id="valueQ" min="0" max="50" step="1"
                                        value=10 min="3" max="7" step="2" value="3" aria-label="Small"
                                        aria-describedby="inputGroup-sizing-sm">
                                    <div class="input-group-prepend ml-2">
                                        <span class="input-group-text" id="inputGroup-sizing-sm">Color Borders:</span>
                                    </div>
                                    <input type="color" class="form-control" id="colorBorder" value="#00ffff"
                                        aria-label="Small" aria-describedby="inputGroup-sizing-sm">
                                </div>
                                <div class="input-group input-group-sm mb-3">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-sm">Kernel 1 size:</span>
                                    </div>
                                    <input type="number" class="form-control" min="3" max="7" step="2" value="3"
                                        aria-label="Small" aria-describedby="inputGroup-sizing-sm" id="kernel1">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text" id="inputGroup-sizing-sm">Kernel 2 size:</span>
                                    </div>
                                    <input type="number" class="form-control" min="3" max="7" step="2" value="3"
                                        aria-label="Small" aria-describedby="inputGroup-sizing-sm" id="kernel2">
                                </div>
                                <div class="mt-3">
                                    <input class="btn btn-color mr-1" id="confirm-srm" value="Run SRM" />
                                    <input class="btn btn-color ml-1" id="reset-srm" value="Reset" />
                                </div>
                                <input type="hidden" id="fileName" value="" />
                                <input type="hidden" id="originalSRM" value="" />
                                <input type="hidden" id="segmentedSRM" value="" />
                                <input type="hidden" id="bordersSRM" value="" />
                                <input type="hidden" id="segBordersSRM" value="" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="about-body">
            <div class="col-12 my-3">
                <div class="card">
                    <div class="card-header bg-color text-white">
                        <p class="card-text">
                        <h4></h4>
                        </p>
                    </div>
                    <div class="card-body">
                        <div class="row p-4">
                            <h4>The algorithm</h4>
                            <p class="text-justify">Statistical region merging (SRM) is an algorithm used for image
                                segmentation.
                                The algorithm is used to evaluate the values within a regional span and grouped together
                                based on the merging criteria,
                                resulting in a smaller list. Some useful examples are creating a group of generations
                                within a population, or in image processing,
                                grouping a number of neighboring pixels based on their shades that fall within a
                                particular threshold (Qualification Criteria).</p>
                            <h4>How to use the app</h4>

                            <p class="text-justify">
                                To use the app you first upload an image on the left square clicking on it and then
                                browsing the file or just by drag-and-drop the file
                                inside the square.
                                You can upload any image file (png, jpg, tiff, gif). This software supports both colored
                                and grayscaled images.
                                Right now tiff image can't be displayed, but they will work with no fail.
                                Once you put a file in the square, you have to confirm the upload by pressing the
                                "Confirm" button.
                                If you click the "Confirm" button, you will see a notification on the top-right corner
                                of the screen telling you if the upload was successful or if it failed.
                            </p>

                            <p class="text-justify">
                                When the image has been successfully uploaded you will see few input controls. They will
                                allow you to:
                            </p>

                            <p class="text-left">
                                <ul>
                                    <li>Set the Q value</li>
                                    <li>Set the displayed color for borders of regions</li>
                                    <li>Set the size of both the kernels used to create the borders</li>
                                </ul>
                            </p>

                            <p class="text-justify">
                                Once you have decided which configuration to run you must press "Run SRM" to proceed.
                            </p>

                            <p class="text-justify">
                                You will now see a loading spinner telling you that the system is processing your
                                request. It can take from few seconds to few minutes
                                to complete. It depends on the resolution of the image you have uploaded.
                            </p>

                            <p class="text-justify">
                                When the algorithm will stop, you will see the results on the right square. Here you can
                                display three images:
                            </p>

                            <p class="text-left">
                                <ul>
                                    <li>The image segmented</li>
                                    <li>The image with the borders of each region</li>
                                    <li>The original image and the borders of each region combined</li>
                                </ul>
                            </p>

                            <p class="text-justify">
                                You can move from one image to another one either using the arrows keys (left and right)
                                or clicking on the rectangular indicators you can see
                                at the bottom of the image.
                            </p>

                            <p class="text-justify">
                                Pressing "Reset" buttons will bring you to the main page, as if you would refresh the
                                page.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-auto">
                        <p>Â© Copyright 2021 Marco Cavalli</p>
                    </div>
                </div>
            </div>
        </footer>

        <!-- jQuery first, then Popper.js, then Bootstrap JS. -->
        <script src="/node_modules/jquery/dist/jquery.min.js"></script>
        <script src="/node_modules/popper.js/dist/umd/popper.min.js"></script>
        <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="/public/assets/js/home.js"></script>
        <script src="/public/assets/js/about.js"></script>
</body>

</html>